{% macro render_field(field) %}
  <div {% if field.errors %} class="error" {% endif %}>{{ field.label }}</div>
  <div {% if field.errors %} class="error" {% endif %}>{{ field(**kwargs)|safe }}
  {% if field.errors %}
    <ul class=errors>
    {% for error in field.errors %}
      <li>{{ error }}</li>
    {% endfor %}
    </ul>
  {% endif %}
  </div>
{% endmacro %}

{% macro render_checkbox_field(field) %}
  <div class="checkbox {% if field.errors %} error {% endif %}">
  {{ field(**kwargs)|safe }} {{ field.label }}
  {% if field.errors %}
    <ul class=errors>
    {% for error in field.errors %}
      <li>{{ error }}</li>
    {% endfor %}
    </ul>
  {% endif %}
  </div>
{% endmacro %}


{% macro render_simple_field(field) %}
  <span class="label {% if field.errors %}error{% endif %}">{{ field.label }}</span>
  <span {% if field.errors %} class="error" {% endif %}>{{ field(**kwargs)|safe }}
  {% if field.errors %}
    <ul class=errors>
    {% for error in field.errors %}
      <li>{{ error }}</li>
    {% endfor %}
    </ul>
  {% endif %}
  </span>
{% endmacro %}


{% macro render_nolabel_field(field) %}
    <span>
    {{ field(**kwargs)|safe }}
        {% if field.errors %}
            <span class="error">
      {% if field.errors %}
          <ul class=errors>
        {% for error in field.errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
      {% endif %}
      </span>
        {% endif %}
    </span>
{% endmacro %}


{% macro render_button(field) %}
  {{ field(**kwargs)|safe }}
{% endmacro %}

{% macro render_time_schedule_form(form, available_timezones) %}
    <label>Schedule time limits</label><a data-template="business-hours" class="set-schedule pure-button button-secondary button-xsmall">Business hours</a>
    <a data-template="weekend" class="set-schedule pure-button button-secondary button-xsmall">Weekends</a>
    <a  data-template="reset" class="set-schedule pure-button button-xsmall">Reset</a><br>
    <style>
    .day-schedule *, .day-schedule select {
        display: inline-block;
    }
    .day-schedule > div:nth-child(1) {
        min-width: 6rem;
    }
    .day-schedule table label {
        padding-left: 0.5rem;
        padding-right: 0.5rem;
        font-weight: normal;
    }
    ul#day-wrapper {
        list-style: none;
    }
    #timezone-info > * {
        display: inline-block;
    }
    </style>
    <br>
    {{ render_checkbox_field(form.time_schedule_limit.enabled) }}
    <span class="pure-form-message-inline">
        Enabled - The rules below will be used.
    </span>
    <br>

    <ul id="day-wrapper">
        {% for day in ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'] %}
            <li class="day-schedule">
                    {{ render_field(form.time_schedule_limit[day]) }}
            </li>
        {% endfor %}
        <li id="timezone-info">
            {{  render_field(form.time_schedule_limit.timezone_offset) }} <span id="local-time-in-tz"></span>
            <datalist id="timezones" style="display: none;">
                {% for timezone in available_timezones %}
                    <option value="{{ timezone }}">{{ timezone }}</option>
                {% endfor %}
            </datalist>

        </li>
    </ul>

{% endmacro %}